# CSS

CSS: `Cascading Style Sheets` 层叠样式表，用于定义网页的样式。

css规则 = 选择器 + 声明块

> 声明块： `{` `}` 中, 包含多个声明（_属性_），每个声明（_属性_）表达了某一方面的样式。

## CSS 代码位置

- 内部样式：写在`<style>`元素中，通常放在head元素中，保证浏览器最先加载样式。
  - 样式很少时，放在内部样式中用来性能优化；浏览器只读取一个文件，提高网页的加载速度。
- 内联样式：直接写在元素的style属性中。
- 外部样式表：将样式表放在单独的css文件中，通过link元素引入，通常放在head元素中。
  - 可以解决多页面样式复用的问题。
  - 有利于浏览器缓存，提高网站的加载速度。
  - 有利于代码分离，便于维护。

## 选择器

用于选中元素（_样式应用的范围_）

### 简单选择器

- 元素选择器：选中对应名称的所有元素 `div`
- ID选择器：选中对应id值的元素 `#id`
- 类选择器：选中对应class值的元素 `.class`
- 通配符选择器：`*` 选择所有元素
- 属性选择器：选择具有特定属性的元素
  - `[attr]`: 选择具有以 `attr` 命名属性的元素
  - `[attr=value]`: 选择具有 `attr` 命名的属性且属性值等于 `value` 的元素
  - `[attr~=value]`: 选择带有以 `attr` 命名的属性的元素，且属性值是一个以空格分隔的列表，其中至少有一个值为 `value`
  - `[attr*=value]`: 选择带有以 `attr` 命名的属性的元素，且属性值包含 `value` 字符
- 伪类选择器：选中某些元素的某种状态
  - `:link`: 超链接未访问过的状态
  - `:visited`: 超链接已访问过的状态
  - `:hover`: 鼠标悬停
  - `:active`: 激活状态，鼠标按下
  - **注意多个伪类的书写顺序**，_爱恨法则(按以上顺序)_
- 伪元素选择器：定位 HTML 中未包含的实体以及无法以其他方式定位的内容部分（_伪元素：文档树中不存在的抽象元素_）
  - `::before`: _创建一个伪元素_，它是所选元素的第一个子元素。
  - `::after`: _创建一个伪元素_，它是所选元素的最后一个子元素。

### 选择器的组合

1. 并且 `selector1selector2`
   - `a:hover`
   - `div::after`
   - `p.class-1`
   - `a[href="http://www.example.com"]`
2. 后代选择：选择选中元素的后代元素中的某些元素 `selector1 selector2`
   - `div ul`
   - `.red li`
   - `.class *`: _选择所后代_
3. 子元素选择：选择选中元素的直接子元素 `selector1 > selector2`
4. 相邻兄弟选择：选择选中同一个父元素下的下一个**紧跟**选中的兄弟元素 `selector1 + selector2`
5. 兄弟选择：选择选中元素后的**所有**符合的兄弟元素 `selector1 ~ selector2`

### 选择器的并列

多个选择器可以用逗号 `,` 分隔

## 常用属性

- `width`: 元素的宽度
- `height`: 元素的高度
- `color`: 元素内部文字的颜色
- `background-color`: 元素的背景颜色
- `font-size`: 字体尺寸大小，可以简单理解为文字的高度
- `font-weight`: 字体粗细程度，需要字体适配
  - 默认值：`normal` = 400
  - `bold` = 700
- `font-family`: 字体，可以使用多个字体以匹配不同环境
  - `sans-serif`: 无衬线字体，操作系统自动选择
- `font-style`: 字体样式，通常用于设置斜体
  - `normal`: 正常
  - `italic`: 斜体
- `text-align`: 文本对齐方式
- `text-decoration`: 文本修饰，如下划线、删除线等
- `text-indent`: 首行文本缩进
- `line-height`: 每行文本的高度，值越大每行距离越大
  - 直接设置数字值：表示相对于当前元素的字体大小，一般用于多行文字
- `letter-spacing`:文字间距
- `text-align`: 元素内部文字的水平排列方式

### 简写属性

- `font`: `font-style` `font-variant` `font-weight` `font-size`/`line-height` `font-family`
- `padding` / `margin`
  - `-top` `-right` `-bottom` `-left`
  - `-top` `-left & -right` `-bottom`
  - `-top & -bottom` `-left & -right`
  - `-top & -right & -bottom & -left`
- `border`
- `border-width`
- `border-style`
- `border-color`

### 颜色表示

- 预设值：定义好的单词，如 `red`
- 三原色（_红、绿、蓝_）色值：每个取值范围是 0~255
  - RGB (_十进制_): `rgb(255, 0, 0)`
  - hex (_十六进制_): `#000000` ~ `#ffffff`，如果每种颜色两位相同，可以简写为 `#000`

### 尺寸单位

- `px`: 像素
- `em`: _相对单位_，相对于父元素的字体大小的倍数，
  - 每个元素必须有字体大小，如果一个元素没有声明字体大小，则会继承其父元素；如果没有父元素，则使用基准字号（_浏览器设置的默认字号_，通常是16px）。

### 特殊取值

- 强制继承：`inherit` ，也可使不能继承的属性强制使用父元素的值。
- 初始值：`initial` 将该属性设置为默认值

生效时间：**在层叠时确定值为特殊值，并不会使用后续步骤**

## 层叠

_声明冲突_：同一个样式多次应用到同一个元素

层叠（_权重计算_）：解决声明冲突的过程（_由浏览器处理_）

1. 比较重要性
2. 比较特殊性
3. 比较源次序

### 重要性

作者样式表中的 `!important` 样式 > 作者样式表中的普通样式 > 浏览器默认样式表中的样式

> _作者样式表：开发者书写的样式_

### 特殊性

总体规则：选择器选中的范围越窄越特殊

**具体规则**：通过选择器计算出一个4位数的权重（_满256进位_）

1. 千位：如果是内联样式则记 `1` 否则记 `0`
2. 百位：所有ID选择器的数量
3. 十位：所有类选择器、属性选择器、伪类选择器的数量
4. 个位：所有元素选择器、伪元素选择器的数量

### 源次序

源代码中书写顺序靠后的覆盖代码书写顺序靠前的样式

### 实际应用

- 重置样式表：书写一个（_通用_）作者样式表，覆盖浏览器默认样式
- _爱恨法则_：特殊性相同，按照交互逻辑的效果，利用源次序来达到想要的效果

> 常用的CSS重置样式表： [normalize.css](https://github.com/necolas/normalize.css/) [reset.css](https://www.joshwcomeau.com/css/custom-css-reset/) [meyer.css](https://meyerweb.com/eric/tools/css/reset/)

## 继承

子元素会继承父元素的**某些**属性，通常和字体、文字内容相关的属性都会被继承。

## 属性值的计算过程

- 浏览器渲染页面时，按照页面文档的树型目录结构，从上到下，从左到右依次渲染
- 浏览器渲染每个元素的前提条件：该元素的**所有css属性**都必须有值

一个元素从所有css属性都没有值到全部有值的过程叫属性值的**计算过程**

1. 确定声明值：将样式表（_作者样式表，浏览器样式表_）中**没有声明冲突**的声明，作为CSS属性的值
2. 层叠冲突：对样式表中**有声明冲突**的声明，按**层叠**规则，确定CSS的属性值
3. 继承：对仍然没有值的CSS属性，若可以继承，则**继承**父元素的属性值
4. 使用默认值：如果仍然没有值，则使用默认值(_每个CSS属性都有默认值_)

## 盒模型

box(_CSS3 概念_): 盒子，每个元素在页面中都会生成一个矩形区域（盒子）

### 盒子类型

1. 行盒：`display: inline` 的元素，在页面中不换行
2. 块盒：`display: block` 的元素，在页面中独占一行

- `display` 属性默认值为 `inline`
- 浏览器默认样式表设置为块盒的元素：`容器元素`、`<H1>~<H6>`、`<p>`
- 浏览器默认样式表设置为行盒的元素：`<span>`、`<a>`、`<img>`、`多媒体元素`

### 盒子的组成部分

无论是行盒还是块盒，都由下面几个部分组成，从内到外分别是：

1. 内容 _content_
   - `width` 和 `height` 设置内容的宽高
   - 通常叫做整个盒子的**内容盒** （_content-box_）
2. 填充 _padding_：盒子边框到盒子内容的距离
   - `padding` 设置内边距
   - 填充区 + 内容区 = **填充盒** （_padding-box_）
3. 边框 _border_
   - `border` : `border-width` `border-style` `border-color`
   - 边框颜色默认为字体颜色
   - 边框区 + 填充区 + 内容区 = **边框盒** （_border-box_）
4. 外边距 _margin_：边框到其他盒子的距离
   - `margin` 设置外边距

### 盒模型的应用

#### 改变宽高范围

默认情况下，`width` 和 `height` 设置的是内容盒的宽高，但衡量设计稿是往往是边框盒的宽高。

解决方案：

1. 精确计算
2. (_CSS3中_)可以使用 `box-sizing` 属性改变宽高的影响范围
   - `box-sizing:content-box` (_默认值_)，宽高影响内容盒
   - `box-sizing:border-box` 改变宽高的影响范围为边框盒

#### 改变背景覆盖范围

默认情况下，背景覆盖边框盒。

(_CSS3中_)通过 `background-clip` 属性可以改变背景覆盖范围。

- `background-clip:border-box` (_默认值_) 背景覆盖边框盒
- `background-clip:padding-box` 背景覆盖填充盒
- `background-clip:content-box` 背景覆盖内容盒

#### 溢出处理

当设置宽高时，内容超出盒子范围时默认可见，(_CSS3中_)可以通过 `overflow` 属性（_简写属性_）设置溢出处理。

- `overflow:visible` (_默认值_) 超出内容可见
- `overflow:hidden` 超出内容隐藏
- `overflow:scroll` 生成滚动条
- `overflow:auto` 自动生成滚动条

> 网站标题为图片时，`H1` 元素的伪元素中用文字填写标题内容，再利用 `overflow:hidden` 隐藏文字，即实现了语义化，优化了SEO，又不影响图片的显示。

#### 断词规则

(_CSS3中_) `word-break` 属性影响文字在**什么位置**被截断换行

- `word-break:normal` (_默认值_) 对于 `CJK` 字符在文字截断，非 `CJK` 字符在单词截断
- `word-break:break-all` 截断所有；对于所有字符都在文字截断
- `word-break:keep-all` 保持所有；所有字符都在单词截断

#### 空白处理

(_CSS3中_) `white-space` 属性控制元素内的空白字符（_空格、换行符等_）的处理规则

- `white-space:normal` (_默认值_)
- `white-space:nowrap` 不换行
  - 与 `overflow:hidden; text-overflow:ellipsis;` 结合使用，可以实现**单行文本溢出显示省略号**

> `pre` 元素的 `white-space` 属性值为 `pre`，禁止空白折叠
